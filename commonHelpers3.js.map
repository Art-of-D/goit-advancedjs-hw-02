{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["\"use strict\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst elements = {\n  firstDelay: document.querySelector('input[name=delay]'),\n  delayStep: document.querySelector('input[name=step]'),\n  promiseAmount: document.querySelector('input[name=amount]'),\n  promiseButton: document.querySelector('button'),\n}\nlet amountOfPromise;\n\nelements.promiseButton.addEventListener('click', promiseHandler);\n\n//promise logic\nfunction promiseHandler(event){\n  event.preventDefault();\n  const startDelay = +elements.firstDelay.value;\n  const nextStepDelay = +elements.delayStep.value;\n  amountOfPromise = elements.promiseAmount.value;\n  elements.promiseButton.disabled = true;\n\n  for(let i = 0; i < amountOfPromise; i++) {\n    createPromise(i + 1, startDelay + (nextStepDelay * i))\n      .then((value) => onSuccesShow(value))\n      .catch((reason) => onErrorShow(reason))\n      .finally(() => {\n        if (i === amountOfPromise - 1){\n          elements.promiseButton.disabled = false;\n        }\n      });\n  }\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n      const shouldResolve = Math.random() > 0.3;\n      setTimeout(() => {\n        if (shouldResolve) {\n          resolve({position, delay});\n        } else {\n          reject({position, delay});\n      }\n    }, delay)});\n}\n\nfunction onSuccesShow({position, delay}){\n  iziToast.success({\n    message: `Fulfilled promise ${position} in ${delay}ms`,\n    position: 'topRight',\n  });\n}\n\nfunction onErrorShow({position, delay}){\n  iziToast.error({\n    message: `Rejected promise ${position} in ${delay}ms`,\n    position: 'topRight',\n  });\n}"],"names":["elements","amountOfPromise","promiseHandler","event","startDelay","nextStepDelay","i","createPromise","value","onSuccesShow","reason","onErrorShow","position","delay","resolve","reject","shouldResolve","iziToast"],"mappings":"wIAIA,MAAMA,EAAW,CACf,WAAY,SAAS,cAAc,mBAAmB,EACtD,UAAW,SAAS,cAAc,kBAAkB,EACpD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,cAAe,SAAS,cAAc,QAAQ,CAChD,EACA,IAAIC,EAEJD,EAAS,cAAc,iBAAiB,QAASE,CAAc,EAG/D,SAASA,EAAeC,EAAM,CAC5BA,EAAM,eAAc,EACpB,MAAMC,EAAa,CAACJ,EAAS,WAAW,MAClCK,EAAgB,CAACL,EAAS,UAAU,MAC1CC,EAAkBD,EAAS,cAAc,MACzCA,EAAS,cAAc,SAAW,GAElC,QAAQM,EAAI,EAAGA,EAAIL,EAAiBK,IAClCC,EAAcD,EAAI,EAAGF,EAAcC,EAAgBC,CAAE,EAClD,KAAME,GAAUC,EAAaD,CAAK,CAAC,EACnC,MAAOE,GAAWC,EAAYD,CAAM,CAAC,EACrC,QAAQ,IAAM,CACTJ,IAAML,EAAkB,IAC1BD,EAAS,cAAc,SAAW,GAE5C,CAAO,CAEP,CAEA,SAASO,EAAcK,EAAUC,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GACtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CAAC,SAAAF,EAAU,MAAAC,CAAK,CAAC,EAEzBE,EAAO,CAAC,SAAAH,EAAU,MAAAC,CAAK,CAAC,CAElC,EAAOA,CAAK,CAAC,CAAC,CACd,CAEA,SAASJ,EAAa,CAAC,SAAAG,EAAU,MAAAC,CAAK,EAAE,CACtCI,EAAS,QAAQ,CACf,QAAS,qBAAqBL,QAAeC,MAC7C,SAAU,UACd,CAAG,CACH,CAEA,SAASF,EAAY,CAAC,SAAAC,EAAU,MAAAC,CAAK,EAAE,CACrCI,EAAS,MAAM,CACb,QAAS,oBAAoBL,QAAeC,MAC5C,SAAU,UACd,CAAG,CACH"}